---
title: 搭建内网穿透服务
date: 2021-09-04 02:31:16.935
updated: 2021-09-08 01:03:48.517
url: /archives/搭建内网穿透服务
categories: 网络
tags: 网络 | frp
---

#### 使用工具frp
##### 步骤
1. 安装golang环境 [官网](https://golang.google.cn/)
```bash
curl -O https://golang.google.cn/dl/go1.17.linux-amd64.tar.gz
rm -rf /usr/local/go && tar -C /usr/local -xzf go1.14.3.linux-amd64.tar.gz
export PATH=$PATH:/usr/local/go/bin

验证
$ go version
```
2.下载最新版本的二进制文件
```bash
根据自己的服务器系统版本下载压缩包:
curl -O https://github.com/fatedier/frp/releases/download/v0.37.1/frp_0.37.1_linux_amd64.tar.gz

解压:
tar -zxvf frp_0.37.1_linux_amd64.tar.gz
```


3.在公网服务器上启动 frps服务
```bash
./frps -c frps.ini
```

4.在内网服务器上启动 frpc服务
```bash
./frpc -c frpc.ini
```


##### 配置
frps.ini
```bash
[common]
bind_port = 7000
vhost_http_port = 8080
```
frpc.ini
```bash
[common]
server_addr = [公网服务器IP]
server_port = 7000

#ssh服务
[secret_ssh]
type = stcp
sk = [校验码]
local_ip = 127.0.0.1
local_port = [本地ssh服务端口]

#web服务
[halo]
type = http
local_port = [本地web服务端口]
http_user = [用户名]
http_pwd = [密码]
custom_domains = [公网服务器域名]
locations = /
```
##### 配置系统开机自启动
```bash
修改$frp_path/systemd/frpc.service 中的User为root
sudo cp $frp_path/systemd/frpc.service /usr/lib/systemd/system/
sudo systemctl enable frpc.service
```





